{"version":3,"sources":["../src/ui_checks.js"],"names":["define","$","ChecksUi","textareaId","width","height","templateParams","$textArea","fail","error","reload","prototype","failed","failMessage","sync","checks","$checkContainers","$activeChecksList","children","each","$checkContainer","check","attr","$argRows","args","$argRow","name","value","val","push","JSON","stringify","getElement","$checksPanel","addClass","appendTo","$backdrop","css","on","hideAddCheckDialog","bind","$availableChecksList","$dialog","createDialog","activeChecksJson","activeChecks","parse","modulesJson","modules","i","length","createActiveCheckContainer","moduleName","hasOwnProperty","module","$moduleContainer","createModuleContainer","checkName","createAvailableCheckContainer","$addCheckButton","append","showAddCheckDialog","removeClass","setTimeout","method","$container","$header","$buttonGroup","$upButton","createButton","moveCheckUp","$downButton","moveCheckDown","checkInfo","$title","html","createHelpButton","$rightButtonGroup","$removeButton","removeCheck","createArgsContainer","params","param","$argumentRow","text","$field","console","option","e","target","closest","$previous","prev","before","$next","next","after","slideUp","remove","addCheck","test","hide","slideDown","$addButton","title","content","iconClass","description","$button","resize","hasFocus","destroy","isResizable","Constructor"],"mappings":"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","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more util.details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Implementation of the html_ui user interface plugin. For overall details\n * of the UI plugin architecture, see userinterfacewrapper.js.\n *\n * @package    qtype\n * @subpackage coderunner\n * @copyright  Richard Lobb, 2018, The University of Canterbury\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n\n    function ChecksUi(textareaId, width, height, templateParams) {\n        this.$textArea = $('#' + textareaId);\n        this.templateParams = templateParams;\n        this.fail = false;\n        this.error = '';\n        this.reload();\n    }\n\n    ChecksUi.prototype.failed = function() {\n        return this.fail;\n    };\n\n    ChecksUi.prototype.failMessage = function() {\n        return this.error;\n    };\n\n    // Copy the serialised version of the HTML UI area to the TextArea.\n    ChecksUi.prototype.sync = function() {\n        let checks = [];\n\n        let $checkContainers = this.$activeChecksList.children();\n        $checkContainers.each(function() {\n            let $checkContainer = $(this);\n            let check = {\n                'module': $checkContainer.attr('data-module'),\n                'method': $checkContainer.attr('data-method')\n            };\n\n            let $argRows =\n                    $checkContainer.children('.args-container').children();\n            if ($argRows) {\n                let args = {};\n                $argRows.each(function() {\n                    let $argRow = $(this);\n                    let name = $argRow.attr('data-param-name');\n                    let value = $argRow.children('.argument-value').val();\n                    args[name] = value;\n                });\n                check['arguments'] = args;\n            }\n            checks.push(check);\n        });\n\n        this.$textArea.val(JSON.stringify(checks));\n    };\n\n    ChecksUi.prototype.getElement = function() {\n        return this.$checksPanel;\n    };\n\n    ChecksUi.prototype.reload = function() {\n        this.$checksPanel = $('<div/>')\n            .addClass('tests-ui');\n\n        this.$activeChecksList = $('<div/>')\n            .addClass('active-tests-list')\n            .appendTo(this.$checksPanel);\n        this.$backdrop = $('<div/>')\n            .addClass('backdrop')\n            .css('display', 'none')\n            .on('click', this.hideAddCheckDialog.bind(this))\n            .appendTo(this.$checksPanel);\n        this.$availableChecksList = $('<div/>')\n            .addClass('available-tests-list');\n        this.$dialog = this.createDialog('Add check', this.$availableChecksList)\n            .appendTo(this.$backdrop);\n\n        let activeChecksJson = this.$textArea.val();\n        let activeChecks = JSON.parse(activeChecksJson);\n\n        let modulesJson = this.$textArea.attr('data-available-checks');\n        this.modules = JSON.parse(modulesJson);\n\n        for (let i = 0; i < activeChecks.length; i++) {\n            let check = activeChecks[i];\n            this.createActiveCheckContainer(check)\n                .appendTo(this.$activeChecksList);\n        }\n\n        for (let moduleName in this.modules) {\n            if (this.modules.hasOwnProperty(moduleName)) {\n                let module = this.modules[moduleName];\n                let $moduleContainer = this\n                    .createModuleContainer(moduleName, module)\n                    .appendTo(this.$availableChecksList);\n                let checks = module['checks'];\n                for (let checkName in checks) {\n                    if (checks.hasOwnProperty(checkName)) {\n                        this.createAvailableCheckContainer(moduleName, checkName, checks[checkName])\n                            .appendTo(this.$availableChecksList);\n                    }\n                }\n            }\n        }\n\n        this.$addCheckButton = $('<button/>')\n            .addClass('btn btn-primary')\n            .append($('<i/>').addClass('icon fa ' + 'fa-plus'))\n            .append('Add check')\n            .on('click', this.showAddCheckDialog.bind(this))\n            .appendTo(this.$checksPanel);\n    };\n\n    ChecksUi.prototype.showAddCheckDialog = function() {\n        this.$backdrop.css('display', 'block')\n            .addClass('visible');\n        $('body').addClass('unscrollable');\n        return false;\n    }\n\n    ChecksUi.prototype.hideAddCheckDialog = function(check) {\n        this.$backdrop.removeClass('visible');\n        $('body').removeClass('unscrollable');\n\n        // hide the element only after the CSS transition has finished\n        setTimeout(function() {\n            this.$backdrop.css('display', 'none');\n        }.bind(this), 500);\n    }\n\n    ChecksUi.prototype.createActiveCheckContainer = function(check) {\n        let module = check['module'];\n        let method = check['method'];\n\n        let $container = $('<div/>')\n            .addClass('test-container')\n            .attr('data-module', module)\n            .attr('data-method', method);\n\n        let $header = $('<div/>')\n            .addClass('test-header')\n            .appendTo($container);\n\n        let $buttonGroup = $('<div/>')\n            .addClass('button-group')\n            .appendTo($header);\n\n        let $upButton = this.createButton('fa-angle-up')\n            .attr('title', 'Move this check up in the list')\n            .on('click', this.moveCheckUp.bind(this))\n            .appendTo($buttonGroup);\n        let $downButton = this.createButton('fa-angle-down')\n            .attr('title', 'Move this check down in the list')\n            .on('click', this.moveCheckDown.bind(this))\n            .appendTo($buttonGroup);\n\n        let checkInfo = this.modules[module]['checks'][method];\n\n        let $title = $('<span/>')\n            .html(checkInfo['name'])\n            .addClass('test-name')\n            .appendTo($header);\n\n        if (checkInfo['description']) {\n            let $helpButton = this.createHelpButton(checkInfo['description'])\n                .appendTo($header);\n        }\n\n        let $rightButtonGroup = $('<div/>')\n            .addClass('button-group float-right')\n            .appendTo($header);\n\n        let $removeButton = this.createButton('fa-trash')\n            .attr('title', 'Remove this check from the list')\n            .on('click', this.removeCheck.bind(this))\n            .appendTo($rightButtonGroup);\n\n        if (checkInfo['params']) {\n            let $argsContainer = this.createArgsContainer(checkInfo, check)\n                .appendTo($container);\n        }\n\n        return $container;\n    };\n\n    /**\n     * Creates a panel where the user can specify the arguments to be passed\n     * to the check. This should be called only if the check accepts parameters.\n     */\n    ChecksUi.prototype.createArgsContainer = function(checkInfo, check) {\n        let params = checkInfo['params'];\n        let args = check['arguments'];\n\n        let $container = $('<div/>')\n            .addClass('args-container');\n\n        for (let i = 0; i < params.length; i++) {\n            let param = params[i];\n\n            let $argumentRow = $('<div/>')\n                .addClass('argument-row')\n                .attr('data-param-name', param['param'])\n                .appendTo($container);\n\n            $('<span/>')\n                .addClass('argument-name')\n                .text(param['name'])\n                .appendTo($argumentRow);\n\n            let value = args[param['param']];\n            if (!value) {\n                value = param['default'];\n            }\n\n            switch (param['type']) {\n                case 'integer':\n                    $field = $('<input/>')\n                        .addClass('argument-value')\n                        .attr('type', 'number')\n                        .val(value)\n                        .appendTo($argumentRow);\n                    if (param.hasOwnProperty('min')) {\n                        $field.attr('min', param['min']);\n                    }\n                    if (param.hasOwnProperty('max')) {\n                        $field.attr('max', param['max']);\n                    }\n                    break;\n                case 'string':\n                    $field = $('<input/>')\n                        .addClass('argument-value')\n                        .val(value)\n                        .appendTo($argumentRow);\n                    break;\n                case 'choice':\n                    $field = $('<select/>')\n                        .addClass('argument-value')\n                        .appendTo($argumentRow);\n                    if (!param.hasOwnProperty('options')) {\n                        console.error('No options provided for choice parameter');\n                        break;\n                    }\n                    for (let option of param['options']) {\n                        $('<option/>')\n                            .text(option)\n                            .appendTo($field);\n                    }\n                    $field.val(value);\n                    break;\n                default:\n                    console.error('Unknown type ' + param['type']);\n            }\n        }\n\n        return $container;\n    }\n\n    /**\n     * Creates a module header.\n     * @param module The name of the module.\n     */\n    ChecksUi.prototype.createModuleContainer = function(module) {\n        let $container = $('<div/>')\n            .addClass('module-container');\n\n        let $header = $('<div/>')\n            .addClass('module-header')\n            .appendTo($container);\n\n        let $title = $('<span/>')\n            .html(this.modules[module]['name'])\n            .addClass('module-name')\n            .appendTo($header);\n\n        return $container;\n    };\n\n    ChecksUi.prototype.moveCheckUp = function(e) {\n        let $checkContainer = $(e.target).closest('.test-container');\n        let $previous = $checkContainer.prev();\n        if ($previous) {\n            $previous.before($checkContainer);\n        }\n        return false;\n    };\n\n    ChecksUi.prototype.moveCheckDown = function(e) {\n        let $checkContainer = $(e.target).closest('.test-container');\n        let $next = $checkContainer.next();\n        if ($next) {\n            $next.after($checkContainer);\n        }\n        return false;\n    };\n\n    ChecksUi.prototype.removeCheck = function(e) {\n        let $checkContainer = $(e.target).closest('.test-container');\n        $checkContainer.slideUp();\n\n        // remove it after the slideUp is done\n        setTimeout(function() {\n            $checkContainer.remove();\n        }.bind(this), 500);\n\n        return false;\n    };\n\n    ChecksUi.prototype.addCheck = function(e) {\n        let $checkContainer = $(e.target).closest('.test-container');\n\n        let test = {\n            'module': $checkContainer.attr('data-module'),\n            'method': $checkContainer.attr('data-method'),\n            'arguments': []\n        };\n\n        this.createActiveCheckContainer(test)\n            .appendTo($('.active-tests-list'))\n            .hide()\n            .slideDown();\n\n        this.hideAddCheckDialog();\n\n        return false;\n    };\n\n    ChecksUi.prototype.createAvailableCheckContainer = function(module, method) {\n        let $container = $('<div/>')\n            .addClass('test-container')\n            .attr('data-module', module)\n            .attr('data-method', method);\n\n        let $header = $('<div/>')\n            .addClass('test-header')\n            .appendTo($container);\n\n        let $buttonGroup = $('<div/>')\n            .addClass('button-group')\n            .appendTo($header);\n\n        let $addButton = this.createButton('fa-plus')\n            .attr('title', 'Add this check to the list')\n            .on('click', this.addCheck.bind(this))\n            .appendTo($buttonGroup);\n\n        let check = this.modules[module]['checks'][method];\n\n        let $title = $('<span/>')\n            .html(check['name'])\n            .addClass('test-name')\n            .appendTo($header);\n\n        if (check['description']) {\n            let $helpButton = this.createHelpButton(check['description'])\n                .appendTo($header);\n        }\n\n        return $container;\n    };\n\n    ChecksUi.prototype.createDialog = function(title, content) {\n        return $('<div/>')\n            .addClass('dialog')\n            .append($('<div/>')\n                .addClass('dialog-header')\n                .html(title))\n            .append($('<div/>')\n                .addClass('dialog-body')\n                .append(content))\n            .on('click', function() {\n                return false;  // avoid bubbling to the backdrop\n            });\n    };\n\n    ChecksUi.prototype.createButton = function(iconClass) {\n        return $('<button/>')\n            .addClass('button')\n            .attr('type', 'button')\n            .append($('<i/>').addClass('icon fa ' + iconClass));\n    };\n\n    ChecksUi.prototype.createHelpButton = function(description) {\n        return $button = $('<a/>')\n            .addClass('btn btn-link p-0')\n            .attr('data-container', 'body')\n            .attr('data-content', '<div><p>' + description + '</p></div>')\n            .attr('data-html', 'true')\n            .attr('data-toggle', 'popover')\n            .attr('data-trigger', 'hover')\n            .append($('<i/>')\n                .addClass('icon fa fa-question-circle text-info')\n                .attr('title', 'Help'));\n    };\n\n    ChecksUi.prototype.resize = function() {\n        // not resizable\n    };\n\n    ChecksUi.prototype.hasFocus = function() {\n        // TODO\n    };\n\n    ChecksUi.prototype.destroy = function() {\n        this.sync();\n        this.$checksPanel.remove();\n        this.$checksPanel = null;\n    };\n\n    ChecksUi.prototype.isResizable = function() {\n        return false;\n    };\n\n    return {\n        Constructor: ChecksUi\n    };\n});\n"],"file":"ui_checks.min.js"}